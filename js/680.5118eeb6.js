"use strict";(self["webpackChunkrick_and_morty"]=self["webpackChunkrick_and_morty"]||[]).push([[680],{19:(e,t,r)=>{r.d(t,{Z:()=>f});var a=r(3673),n=r(2323);(0,a.dD)("data-v-00086b04");const o={class:"character-preview__name text-h6 text-no-wrap text-grey-4"};function c(e,t,r,c,l,s){const i=(0,a.up)("q-img"),u=(0,a.up)("q-card"),d=(0,a.up)("q-item");return(0,a.wg)(),(0,a.j4)(d,{to:{name:"characterProfile",params:{id:e.id}},class:"character-preview col-xs-12 col-sm-6 col-md-3 col-lg-2 q-px-md q-py-none q-my-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"character-preview__card col-12 q-pa-md"},{default:(0,a.w5)((()=>[(0,a._)("p",o,(0,n.zw)(e.name),1),(0,a.Wm)(i,{src:e.image,class:"character-preview__image"},null,8,["src"])])),_:1})])),_:1},8,["to"])}(0,a.Cn)();const l=(0,a.aZ)({name:"CharacterPreview",props:{id:{type:String,required:!0},image:{type:String,required:!0},name:{type:String,required:!0}}});var s=r(3414),i=r(151),u=r(4027),d=r(7518),p=r.n(d);l.render=c,l.__scopeId="data-v-00086b04";const f=l;p()(l,"components",{QItem:s.Z,QCard:i.Z,QImg:u.Z})},8680:(e,t,r)=>{r.r(t),r.d(t,{default:()=>V});r(7280);var a=r(3673),n=r(8880);(0,a.dD)("data-v-646564d1");const o={class:"text-center text-h5 q-px-md"};function c(e,t,r,c,l,s){const i=(0,a.up)("SearchBar"),u=(0,a.up)("CharacterPreview"),d=(0,a.up)("Loader"),p=(0,a.up)("q-infinite-scroll"),f=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(f,{class:"results-container"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=t=>e.search=t)},null,8,["modelValue"]),(0,a.Wm)(p,{onLoad:e.onLoad,offset:1e3,ref:"infiniteScrollRef",class:"row"},{loading:(0,a.w5)((()=>[(0,a.Wm)(d)])),default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.characters,(e=>((0,a.wg)(),(0,a.j4)(u,(0,a.dG)({key:e.id},e),null,16)))),128))])),_:1},8,["onLoad"]),(0,a.wy)((0,a._)("p",o," There are no creatures with this name. ",512),[[n.F8,e.showNoResultsText]])])),_:1})}(0,a.Cn)();var l=r(1959);function s(e,t,r,o,c,l){const s=(0,a.up)("q-icon"),i=(0,a.up)("q-input"),u=(0,a.up)("q-toolbar"),d=(0,a.up)("q-page-sticky");return(0,a.wg)(),(0,a.j4)(d,{expand:"",position:"top",class:"shadow-12 search-bar"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"bg-dark text-white row search-bar q-pa-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{modelValue:e.search,"onUpdate:modelValue":t[0]||(t[0]=t=>e.search=t),debounce:"1000",filled:"",placeholder:"Type here to look into the Cosmos...",class:"col-12",ref:"inputRef",onKeypress:(0,n.D2)(e.blur,["enter"])},{append:(0,a.w5)((()=>[(0,a.Wm)(s,{name:"search"})])),_:1},8,["modelValue","onKeypress"])])),_:1})])),_:1})}function i(e,t){return(0,l.Fl)({get:()=>e.modelValue,set:e=>t("update:modelValue",e)})}const u=()=>{const e=(0,l.iH)(null),t=()=>{var t;null===(t=e.value)||void 0===t||t.blur()};return{blur:t,inputRef:e}},d=(0,a.aZ)({name:"SearchBar",props:{modelValue:String},setup(e,{emit:t}){const{blur:r,inputRef:a}=u();return{search:i(e,t),blur:r,inputRef:a}}});var p=r(1007),f=r(9570),h=r(6112),m=r(4554),v=r(7518),w=r.n(v);d.render=s,d.__scopeId="data-v-976d9270";const g=d;w()(d,"components",{QPageSticky:p.Z,QToolbar:f.Z,QInput:h.Z,QIcon:m.Z});const y={class:"row justify-center q-my-md col-12"};function _(e,t,r,n,o,c){const l=(0,a.up)("q-spinner-dots");return(0,a.wg)(),(0,a.iD)("div",y,[(0,a.Wm)(l,{color:"primary",size:"40px"})])}const b=(0,a.aZ)({name:"Loader"});var q=r(4765);b.render=_;const x=b;w()(b,"components",{QSpinnerDots:q.Z});var Z=r(19),S=r(1832),k=r(1814),C=function(e,t,r,a){function n(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function c(e){try{s(a.next(e))}catch(t){o(t)}}function l(e){try{s(a["throw"](e))}catch(t){o(t)}}function s(e){e.done?r(e.value):n(e.value).then(c,l)}s((a=a.apply(e,t||[])).next())}))};const P=e=>{const t=k.ZP`
      query characters($page: Int, $filter: FilterCharacter) {
        characters(page: $page, filter: $filter) {
          info {
            next
          },
          results {
            id,
            name,
            image
          }
        }
    }`,{result:r,fetchMore:n,refetch:o,loading:c}=(0,S.aM)(t,(()=>({page:1,filter:e.value}))),s=(0,l.Fl)((()=>{var e,t;return null!==(t=null===(e=r.value)||void 0===e?void 0:e.characters.results)&&void 0!==t?t:[]})),i=(0,l.Fl)((()=>{var e,t;return null!==(t=null===(e=r.value)||void 0===e?void 0:e.characters.info.next)&&void 0!==t?t:null})),u=(0,l.Fl)((()=>null!==i.value)),d=()=>C(void 0,void 0,void 0,(function*(){yield n({variables:{page:i.value,filter:e.value},updateQuery:(e,{fetchMoreResult:t})=>{if(!t)return e;const r=e.characters.results,a=t.characters.results,n=r.concat(a);return Object.assign(Object.assign({},e),{characters:Object.assign(Object.assign({},e.characters),{info:Object.assign({},t.characters.info),results:n})})}})}));return(0,a.YP)(e,(e=>{o({page:1,filter:e})})),{characters:s,loadMore:d,loading:c,hasNext:u}};var Q=function(e,t,r,a){function n(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function c(e){try{s(a.next(e))}catch(t){o(t)}}function l(e){try{s(a["throw"](e))}catch(t){o(t)}}function s(e){e.done?r(e.value):n(e.value).then(c,l)}s((a=a.apply(e,t||[])).next())}))};const R=(e,t,r,n)=>{const o=(0,l.iH)(null);(0,a.YP)(e,(()=>{var e;window.scroll({top:0,left:0,behavior:"smooth"}),null===(e=o.value)||void 0===e||e.reset()}));const c=(e,a)=>Q(void 0,void 0,void 0,(function*(){t.value||r.value&&(yield n()),a()}));return{infiniteScrollRef:o,onLoad:c}},j=(0,a.aZ)({name:"Characters",components:{SearchBar:g,Loader:x,CharacterPreview:Z.Z},setup(){const e=(0,l.iH)(""),t=(0,l.Fl)((()=>({name:e.value}))),{characters:r,loadMore:a,loading:n,hasNext:o}=P(t),{infiniteScrollRef:c,onLoad:s}=R(t,n,o,a),i=(0,l.Fl)((()=>e.value.length&&!r.value.length&&!n.value));return{search:e,characters:r,infiniteScrollRef:c,showNoResultsText:i,onLoad:s}}});var I=r(4379),L=r(2729);j.render=c,j.__scopeId="data-v-646564d1";const V=j;w()(j,"components",{QPage:I.Z,QInfiniteScroll:L.Z})}}]);